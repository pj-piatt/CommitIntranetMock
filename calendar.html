<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calendar – Commit Intranet Hub</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="stylesheet" href="css/ai-assistant.css"/>
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Department Navigation">
      <div class="sidebar-header">
        <img src="assets/commit-logo-white.svg" alt="Commit Logo" class="sidebar-logo" />
      </div>
      <nav>
        <ul>
          <h2>Departments</h2>
          <li><a href="departments/hr.html">👥 HR</a></li>
          <li><a href="departments/it.html">💻 IT Support</a></li>
          <li><a href="departments/operations.html">📦 Operations</a></li>
          <li><a href="departments/policy.html">📜 Policy</a></li>
          <li><a href="departments/development.html">💡 Development</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
      <header class="site-header">
        <h1>Calendar</h1>
        <nav class="topnav">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="news.html">News</a></li>
            <li><a href="calendar.html" class="active">Calendar</a></li>
            <li><a href="documents.html">Documents</a></li>
            <li><a href="shoutouts.html">Shoutouts</a></li>
            <li><a href="wiki.html">Wiki</a></li>
            <li><a href="ai.html">Ask AI</a></li>
          </ul>
        </nav>
      </header>

      <main>
        <div class="calendar-container">
          <div class="calendar-header">
            <h2 id="month-year"></h2>
            <div>
              <button onclick="prevMonth()">←</button>
              <button onclick="nextMonth()">→</button>
            </div>
          </div>
          <div class="calendar-grid" id="calendar-grid"></div>
        </div>
      </main>

      <footer class="site-footer">
        <p>© 2025 The Commit Partnership &nbsp;|&nbsp; Built for demonstration purposes</p>
        <p style="font-size: 0.8rem; color: #aaa;">All content and interactions are simulated.</p>
      </footer>
    </div>
  </div>

  <!-- AI Assistant Bubble -->
  <div id="ai-chat-widget">
    <button id="ai-toggle" aria-label="Open AI Assistant">🤖</button>
    <div id="ai-chat-window" style="display: none;">
      <div class="ai-chat-header">
        <span>Commit AI Assistant</span>
        <button id="ai-close">×</button>
      </div>
      <div class="ai-chat-body" id="ai-messages"></div>
      <textarea id="ai-user-input" placeholder="Ask a question..."></textarea>
      <button id="ai-send">Send</button>
    </div>
  </div>

  <script src="js/ai-assistant.js" defer></script>

  <!-- JavaScript Calendar Logic -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const calendarGrid = document.getElementById("calendar-grid");
      const monthYear = document.getElementById("month-year");
      let currentDate = new Date();

      const events = {
        "2025-08-05": "All-Staff Meeting",
        "2025-08-12": "Summer PTO Deadline",
        "2025-08-20": "Birthday Bash 🎉",
        "2025-08-30": "Labor Day PTO"
      };

      function renderCalendar(date) {
        const year = date.getFullYear();
        const month = date.getMonth();
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        calendarGrid.innerHTML = "";
        monthYear.textContent = `${date.toLocaleString("default", { month: "long" })} ${year}`;

        ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"].forEach(day => {
          const div = document.createElement("div");
          div.className = "day";
          div.style.fontWeight = "bold";
          div.textContent = day;
          calendarGrid.appendChild(div);
        });

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement("div");
          empty.className = "day";
          calendarGrid.appendChild(empty);
        }

        for (let d = 1; d <= daysInMonth; d++) {
          const dayDiv = document.createElement("div");
          const current = new Date();
          const cellDate = new Date(year, month, d);
          const iso = cellDate.toISOString().split("T")[0];

          dayDiv.className = "day";
          if (
            cellDate.getDate() === current.getDate() &&
            cellDate.getMonth() === current.getMonth() &&
            cellDate.getFullYear() === current.getFullYear()
          ) {
            dayDiv.classList.add("today");
          }

          dayDiv.innerHTML = `<strong>${d}</strong>`;
          if (events[iso]) {
            const event = document.createElement("div");
            event.className = "event";
            event.textContent = events[iso];
            dayDiv.appendChild(event);
          }

          calendarGrid.appendChild(dayDiv);
        }
      }

      window.prevMonth = () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar(currentDate);
      };

      window.nextMonth = () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar(currentDate);
      };

      renderCalendar(currentDate);
    });
  </script>
</body>
</html>
