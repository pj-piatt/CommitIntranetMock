<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Company Wiki | Commit Intranet Hub</title>
  <link rel="stylesheet" href="css/styles.css" />
  <script defer src="scripts/wiki.js"></script>
  <script defer src="scripts/ai-assistant.js"></script>

  <style>
    .wiki-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .article {
      background: #fff;
      border-radius: 8px;
      padding: 1.25rem;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      transition: box-shadow 0.2s ease;
    }

    .article:hover {
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .article h3 {
      margin: 0;
      font-size: 1.1rem;
      color: #1c2b39;
    }

    .article p {
      font-size: 0.95rem;
      color: #444;
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .tag {
      background-color: #f0f4fa;
      color: #1c2b39;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .feedback {
      font-size: 0.85rem;
      color: #555;
    }

    .feedback button {
      background-color: #1c2b39;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 4px 12px;
      font-size: 0.85rem;
      margin-left: 0.5rem;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .feedback button:hover {
      background-color: #2e3f54;
    }

    /* AI Assistant Styles */
    .ai-bubble {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #0078d4;
      color: white;
      font-size: 1.5rem;
      padding: 10px 14px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 999;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .ai-chat {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 300px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 1000;
      overflow: hidden;
      flex-direction: column;
      font-size: 0.95rem;
    }

    .ai-header {
      background: #1c2b39;
      color: white;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .ai-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
    }

    .ai-body {
      max-height: 200px;
      overflow-y: auto;
      padding: 10px;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
    }

    .ai-input {
      display: flex;
      padding: 10px;
      gap: 6px;
    }

    .ai-input textarea {
      flex: 1;
      resize: none;
      padding: 6px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .ai-input button {
      padding: 6px 12px;
      background-color: #0078d4;
      color: white;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }

    .ai-input button:hover {
      background-color: #005fa3;
    }
  </style>
</head>

<body>
  <div class="layout">
    <!-- Sidebar Navigation -->
    <aside class="sidebar" aria-label="Department Navigation">
      <div class="sidebar-header">
        <img src="assets/commit-logo-white.svg" alt="Commit Logo" class="logo" />
      </div>
      <nav>
        <ul>
          <h2>Departments</h2>
          <li><a href="departments/hr.html">ðŸ‘¥ HR</a></li>
          <li><a href="departments/it.html">ðŸ’» IT Support</a></li>
          <li><a href="departments/operations.html">ðŸ“¦ Operations</a></li>
          <li><a href="departments/policy.html">ðŸ“œ Policy</a></li>
          <li><a href="development.html">ðŸ’¡ Development</a></li>
        </ul>
      </nav>

      <!-- Wiki Filters -->
      <div class="sidebar-categories">
        <h4>Categories</h4>
        <ul>
          <li><button class="tag-chip" data-tag="IT">IT</button></li>
          <li><button class="tag-chip" data-tag="HR">HR</button></li>
          <li><button class="tag-chip" data-tag="Onboarding">Onboarding</button></li>
          <li><button class="tag-chip" data-tag="Tools">Tools</button></li>
        </ul>
      </div>
    </aside>

    <main class="main-content">
      <header class="site-header">
        <h1>Company Wiki</h1>
        <nav class="topnav">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="news.html">News</a></li>
            <li><a href="calendar.html">Calendar</a></li>
            <li><a href="documents.html">Documents</a></li>
            <li><a href="shoutouts.html">Shoutouts</a></li>
            <li><a href="wiki.html" class="active">Wiki</a></li>
            <li><a href="ai.html">Ask AI</a></li>
          </ul>
        </nav>
      </header>

      <p>Explore internal resources, policies, how-tos, and FAQs. Search and filter articles below.</p>

      <input type="text" id="wiki-search" placeholder="Search articles..." class="search-bar" />

      <section class="wiki-grid" id="wiki-articles">
        <a href="wiki-articles/reset-password.html" class="article" data-tags="IT,Tools">
          <h3>How to Reset Your Password</h3>
          <p>Visit the password reset portal or contact IT for MFA support.</p>
          <div class="tags"><span class="tag">IT</span> <span class="tag">Tools</span></div>
          <div class="feedback">
            <span>Was this helpful?</span>
            <button class="thumbs-up">Yes</button>
            <button class="thumbs-down">No</button>
          </div>
        </a>

        <a href="wiki-articles/onboarding-checklist.html" class="article" data-tags="HR,Onboarding">
          <h3>New Hire Onboarding Checklist</h3>
          <p>Get started with accounts, tools, HR paperwork, and Commit culture.</p>
          <div class="tags"><span class="tag">HR</span> <span class="tag">Onboarding</span></div>
          <div class="feedback">
            <span>Was this helpful?</span>
            <button class="thumbs-up">Yes</button>
            <button class="thumbs-down">No</button>
          </div>
        </a>

        <a href="wiki-articles/software-request.html" class="article" data-tags="IT,Tools">
          <h3>Submit a Software Access Request</h3>
          <p>Instructions and form to request software installation or license access.</p>
          <div class="tags"><span class="tag">IT</span> <span class="tag">Tools</span></div>
          <div class="feedback">
            <span>Was this helpful?</span>
            <button class="thumbs-up">Yes</button>
            <button class="thumbs-down">No</button>
          </div>
        </a>

        <a href="wiki-articles/pto-policy.html" class="article" data-tags="HR">
          <h3>Understanding PTO & Leave Policies</h3>
          <p>Review our updated policies on vacation, sick time, and parental leave.</p>
          <div class="tags"><span class="tag">HR</span></div>
          <div class="feedback">
            <span>Was this helpful?</span>
            <button class="thumbs-up">Yes</button>
            <button class="thumbs-down">No</button>
          </div>
        </a>

        <a href="wiki-articles/Commit_Mock_Document_Upload_guide.pdf" class="article" data-tags="IT,Tools">
          <h3>Upload Documents to the Library</h3>
          <p>Step-by-step guide for uploading files by department in the Document Library.</p>
          <div class="tags"><span class="tag">IT</span> <span class="tag">Tools</span></div>
          <div class="feedback">
            <span>Was this helpful?</span>
            <button class="thumbs-up">Yes</button>
            <button class="thumbs-down">No</button>
          </div>
        </a>

      </section>
    </main>
  </div>

  <footer class="site-footer">
    <p>Â© 2025 The Commit Partnership. All rights reserved.</p>
  </footer>

  <!-- AI Assistant UI -->
  <div id="ai-toggle" class="ai-bubble">ðŸ’¬</div>

  <div id="ai-chat-window" class="ai-chat">
    <div class="ai-header">
      <strong>Commit AI</strong>
      <button id="ai-close" class="ai-close">Ã—</button>
    </div>
    <div id="ai-messages" class="ai-body"></div>
    <div class="ai-input">
      <textarea id="ai-user-input" placeholder="Ask me anything..."></textarea>
      <button id="ai-send">Send</button>
    </div>
  </div>
  <script>
  window.addEventListener("load", function () {
    if (typeof initAssistant === "function") initAssistant();
  });
</script>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggleBtn = document.getElementById("ai-toggle");
    const chatWindow = document.getElementById("ai-chat-window");
    const closeBtn = document.getElementById("ai-close");
    const sendBtn = document.getElementById("ai-send");
    const chatBody = document.getElementById("ai-messages");
    const inputField = document.getElementById("ai-user-input");

    if (!toggleBtn || !chatWindow || !closeBtn || !sendBtn || !chatBody || !inputField) {
      console.warn("AI Assistant could not initialize.");
      return;
    }

    toggleBtn.onclick = () => {
      chatWindow.style.display = "block";
      inputField.focus();
    };

    closeBtn.onclick = () => {
      chatWindow.style.display = "none";
    };

    sendBtn.onclick = () => {
      const input = inputField.value.trim();
      if (!input) return;

      const userMsg = document.createElement("div");
      userMsg.innerHTML = `<strong>You:</strong> ${input}`;
      chatBody.appendChild(userMsg);

      const aiMsg = document.createElement("div");
      aiMsg.innerHTML = `<strong>Commit AI:</strong> ${getAIResponse(input)}`;
      chatBody.appendChild(aiMsg);

      inputField.value = "";
      chatBody.scrollTop = chatBody.scrollHeight;
    };

    inputField.addEventListener("keydown", function (e) {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendBtn.click();
      }
    });
  });
</script>
<script>
  function getAIResponse(input) {
    const lower = input.toLowerCase();

    // HR
    if (lower.includes("pto") || lower.includes("vacation") || lower.includes("time off"))
      return `You can submit your PTO request <a href='pto-request.html'>here</a>. Check the <a href='wiki-articles/pto-policy.html'>PTO policy</a> for details.`;
    if (lower.includes("benefits") || lower.includes("insurance"))
      return `Benefit details can be found in the <a href='documents.html'>HR Documents section</a>.`;
    if (lower.includes("employee handbook"))
      return `You can find the latest Employee Handbook in the <a href='documents.html'>HR panel</a>.`;

    // IT Support
    if (lower.includes("hardware") || lower.includes("laptop") || lower.includes("computer"))
      return `Need equipment? Submit a <a href='hardware-request.html'>Hardware Request</a>.`;
    if (lower.includes("vpn"))
      return `For VPN access, check the <a href='documents.html'>VPN Setup Guide</a> under IT Documents or submit a request via the <a href='it-helpdesk.html'>Help Desk</a>.`;
    if (lower.includes("help desk") || lower.includes("tech support") || lower.includes("support ticket"))
      return `Submit a request via the <a href='it-helpdesk.html'>IT Help Desk</a>.`;
    if (lower.includes("software") || lower.includes("install"))
      return `Use the <a href='software-request.html'>Software Request form</a> to request installations or access.`;
    if (lower.includes("reset password"))
      return `Check the <a href='wiki-articles/reset-password.html'>password reset guide</a> in the Wiki, or contact IT for help with MFA.`;

    // Policy
    if (lower.includes("policy") || lower.includes("guidelines"))
      return `Explore department guidelines on the <a href='policy.html'>Policy Page</a> or browse files in the <a href='documents.html'>Policy Documents</a>.`;

    // Operations
    if (lower.includes("operations") || lower.includes("logistics") || lower.includes("inventory"))
      return `Visit the <a href='operations.html'>Operations page</a> for updates or upload Ops docs via the Documents Library.`;

    // Onboarding
    if (lower.includes("onboarding") || lower.includes("new hire") || lower.includes("starting work"))
      return `Start with the <a href='wiki-articles/onboarding-checklist.html'>Onboarding Checklist</a> in the Wiki.`;

    // Shoutouts
    if (lower.includes("shoutout") || lower.includes("recognition"))
      return `Give a teammate a shoutout via the <a href='shoutouts.html'>Shoutouts page</a>.`;

    // Document Upload
    if (
      lower.includes("upload a document") ||
      lower.includes("upload file") ||
      lower.includes("add document") ||
      lower.includes("submit document") ||
      lower.includes("how do i upload") ||
      lower.includes("upload to documents") ||
      lower.includes("upload guide")
    )
      return `You can upload files to your department panel on the <a href='documents.html'>Documents page</a>.<br>Need help? View the <a href='wiki-articles/Commit_Mock_Document_Upload_guide.pdf'>Upload Documents Guide</a>.`;

    // Fallback
    return "I'm still learning! Try rephrasing your question or check the <a href='wiki.html'>Wiki</a> for help.";
  }
</script>


</body>
</html>
